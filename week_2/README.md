# 👻 2주차 과제


> 챕터: Web  
> 사일로: 개발


### 과제 내용
- 시큐어 코딩 실습 - 취약한 웹 어플리케이션 개발
    - 언어/프레임워크 자유 선택(Python/Flask, Node.js/Express, Java/Spring Boot, PHP/Laravel, C#/ASP.NET 등)  
    - 기능: 댓글 작성 폼(이름, 내용) + 작성된 댓글 출력 + 검색기능(선택)
- 웹 애플리케이션에는 아래의 XSS 취약점 중 최소 한 개는 있어야 함
    - Reflected XSS
    - Stored XSS
-  취약점 발생 인증
    - 캡쳐해서 README.md에 넣어주세용
- 선택사항: 취약점 패치해보기 


## 1️⃣ 취약점 내용 정리 


### 1 ) Reflected XSS 
- 공격자가 악성 스크립트가 포함된 URL을 사용자에게 전달. 해당 URL을 사용자가 클릭하면, 서버는 스크립트를 그대로 사용자의 브라우저로 응답하고, 브라우저는 스크립트를 실행한다. 
- url 자체에 악성 스크립트 포함 (예시: `http://example.com/search?query=<script>alert('XSS');</script>`)
- 스크립트가 서버에 전달되지 않고, url을 통해 일회성으로 전달됨. 

#### ❓ 해당 취약점을 가진 웹 어플리케이션을 만들려면? 
- html 특수문자 변환 기능이 없어서 html 태그를 구성하는 `<`나 `>` 등을 엔티티로 변환하는 처리가 없다 
- `script`나 `oneerror`같은 스크립트 관련 키워드 차단이 없다 
- `GET` 방식으로 파라미터를 받아와, 그대로 html 페이지에 출력하는 기능을 구현해야 한다. 

#### ❗ 어떤 공격이 가능한가?
- 악성 코드를 제어하는 사이트나 피싱 사이트 등으로 리다이렉트
- 쿠키를 탈취하여 세션 하이재킹
- CSRF 공격 유도 가능
- 그 외 기타 등등... 
- 사용자가 해당 url을 속아서 클릭하도록 해야 함 


### 2 ) Stored XSS
- 악성 스크립트를 웹 서버의 데이터베이스나 파일 시스테에 영구적으로 저장하는 방식
- 해당 페이지를 방문하는 모든 사용자에게 전송되어 실행됨
- 웹 서버에 영구적으로 스크립트가 저장되며, 한 번 감염되면 방문하는 모든 사용자에게 영향

#### ❓ 해당 취약점을 가진 웹 어플리케이션을 만들려면? 
- 입력값을 데이터베이스에 저장하기 전에 검증하고 필터링하는 기능이 없어야 한다.
- `<script>`, `<iframe>` 등의 잠재적으로 위험한 태그를 제거하거나 차단하지 않는다.
- `<`이나 `>`과 같은 특수문자를 HTML 엔티티로 변환하지 않고 저장한다.
- 데이터베이스에 데이터를 저장하기 전이나 출력하기 전에 이스케이프 처리를 하지 않는다. 
- 웹 페이지에 렌더링 할 때에도 `innerHtml`과 같은 메서드를 사용해 삽입하면 이를 html코드로 인식하고 실행할 수 있다. 
- 입력된 콘텐츠를 아무런 처리 없이 그대로 화면에 출력해야 한다. 

#### ❗ 어떤 공격이 가능한가?
- 쿠키 탈취를 통한 세션 하이재킹, 악성 코드의 삽입 및 배포 등등
- keylogger 스크립트를 주입하여 입력하는 모든 정보 탈취 
- CSRF 공격 유도 가능
- 그 외 기타 등등..
- 한 번 사이트에 저장해 두면 해당 글이나 페이지를 경유한 모두에게 영향 


## 2️⃣ 웹 어플리케이션 개발 (Python Flask 이용)